<div style="margin: 0;padding: 0;">

  <app-topmenuheader></app-topmenuheader>
  <div class="container-fluid">
    <div class="row">
      <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
          <app-sidenavmenu></app-sidenavmenu>
      </nav>

      <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
        <div class="justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <div class="row mb-2 mb-md-0">
              
              <div class="col-md-2 col-lg-2 mb-3">
                <label for="exampleInputEmail1">Select Sponsor</label>
                <select [(ngModel)]="sponsorId" [ngModelOptions]="{standalone: true}" class="form-select">                
                  <!-- <option value="0" selected>All</option> -->
                  <option *ngFor="let sponsor of sponsorList" [ngValue]="sponsor._id">{{sponsor.name}}
                  </option>
                </select>
              </div>
              <!-- <div class="col-md-2 col-lg-2 mb-3">
                <label for="exampleInputEmail1">Select School</label>
                <select [(ngModel)]="schoolId" [ngModelOptions]="{standalone: true}" class="form-select">                
                    <option value="0" selected>All</option>
                    <option *ngFor="let school of schoolList" [ngValue]="school">{{school.schoolName}}
                    </option>
                </select>
              </div>      -->
              <div class="col-md-2 col-lg-2 mb-3">
                <label for="exampleInputEmail1">Select Medium</label>
                <select [(ngModel)]="mediumId" [ngModelOptions]="{standalone: true}" class="form-select">                
                    <option value="0" selected>All</option>
                    <option *ngFor="let medium of mediumsList" [ngValue]="medium">{{medium.name}}
                    </option>
                </select>
              </div> 
              <div class="col-md-2 col-lg-2 mb-3">
                <label for="exampleInputEmail1">Select date range</label>
                <select
                  [(ngModel)]="viewtype"
                  [ngModelOptions]="{ standalone: true }"
                  class="form-select"
                >
                  <option [value]="0" selected>All</option>
                  <option [value]="1">Custom Date</option>
                </select>
              </div>
              <div class="col-md-4 col-lg-4 mb-3 row">
                <div *ngIf="viewtype == 1">
                  <mat-form-field appearance="fill">
                    <mat-label>Enter a date range</mat-label>
                    <mat-date-range-input [rangePicker]="picker" [max]="today">
                      <input
                        matStartDate
                        class="form-control"
                        [(ngModel)]="selectfromdate"
                        [ngModelOptions]="{ standalone: true }"
                        placeholder="From date"
                      />
                      <input
                        matEndDate
                        class="form-control"
                        [(ngModel)]="selecttodate"
                        [ngModelOptions]="{ standalone: true }"
                        placeholder="To date"
                      />
                    </mat-date-range-input>
                    <mat-datepicker-toggle
                      matSuffix
                      [for]="picker"
                    ></mat-datepicker-toggle>
                    <mat-date-range-picker #picker></mat-date-range-picker>
                  </mat-form-field>
                  <!-- <label for="exampleInputEmail1">From</label> -->
                  <!-- <input
                    class="form-control"
                    [(ngModel)]="selectfromdate"
                    [ngModelOptions]="{ standalone: true }"
                    type="date"
                  /> -->
                </div>
                <!-- <div *ngIf="viewtype == 1" class="col-md-4 col-lg-4 mb-3">
                  <label for="exampleInputEmail1">To</label>
                  <input
                    class="form-control"
                    [(ngModel)]="selecttodate"
                    [ngModelOptions]="{ standalone: true }"
                    type="date"
                  />
                </div> -->
                <div>
                  <br />
                  <button
                    type="button"
                    [disabled]="loading"
                    (click)="loadDashboardData()"
                    class="btn btn-outline-secondary"
                  >
                    Load Data
                  </button>
                </div>
              </div>
              <!-- <div class="col-md-6 col-lg-6 mb-3 row">
                <div class="col-md-3 col-lg-3 mb-3">
                  <label for="exampleInputEmail1">From</label>
                  <input class="form-control" [(ngModel)]="selectfromdate" [ngModelOptions]="{standalone: true}" type="date">
                </div>
                <div class="col-md-3 col-lg-3 mb-3">
                  <label for="exampleInputEmail1">To</label>
                  <input class="form-control" [(ngModel)]="selecttodate" [ngModelOptions]="{standalone: true}" type="date">
                </div>
                <div class="col-md-6 col-lg-6 mb-3">
                  <br>
                  <button type="button" (click)="loadDashboardData()" class="btn btn-outline-secondary me-3">
                    Load Data
                  </button>     

                </div>
              </div> -->
              
          </div>
        </div>
        <div class="table-responsive" style="overflow: auto;height: 650px;">
          <table id="ExampleTable" class="table table-striped table-sm row-border hover" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
            <thead>
              <!-- <tr *ngIf="datalist.length > 0 && !loading">
                <th scope="col" colspan="1" class="pb-3">Sponsor :- {{(sponsorData == 0 || sponsorData == "0") ? 'All': sponsorData.name }}</th>
                <th scope="col" colspan="1" class="pb-3">School :- {{(schoolData == 0 || schoolData == "0") ? 'All' : schoolData.schoolName }}</th>
                <th scope="col" colspan="1" class="pb-3">Medium :- {{(mediumData == 0 || mediumData == "0") ? 'All' : mediumData.name}}</th>
                <th scope="col" colspan="3" class="pb-3">Date Range :- {{ selectfromDatadate+" - "+selecttoDatadate }}</th>
                <th scope="col" colspan="1"></th>
              </tr>
              <tr *ngIf="datalist.length > 0 && !loading">
                <th scope="col" colspan="1" class="pt-3 pb-3">Total Coupons :- {{totalCouponCode}}</th>
                <th scope="col" colspan="1" class="pt-3 pb-3">Active Coupons :- {{activeCouponCode}}</th>
                <th scope="col" colspan="1" class="pt-3 pb-3">Used Coupons :- {{totalCouponCode-activeCouponCode}}</th>
                <th scope="col" colspan="4"></th>
              </tr> -->
              <tr>
                <th scope="col">Sr. No.</th>
                <th scope="col">Class</th>
                <!-- <th scope="col">Activation Date</th> -->
                <th scope="col">Male</th>
                <th scope="col">Female</th>
                <th scope="col">Licences Used</th>
                <!-- <th scope="col">Sponsor name </th> -->
              </tr>
            </thead>
            <tbody *ngIf="loading">
              <tr>
                <td colspan="7">Loading...</td>
              </tr>
            </tbody>
            <!-- <tbody *ngIf="datalist.length == 0 && !loading">
              <tr>
                <td colspan="7">No data</td>
              </tr>
            </tbody> -->
            <tbody *ngIf="!loading">
              <tr *ngFor="let data of datalist; let i = index;">
                <td>{{i+1}}</td>
                <td>{{ordinal_suffix_of_eng(data.gradeName)}}</td>
                <!-- <td>{{(schoolData == 0 || schoolData == "0") ? '-' : (schoolData.createdAt | date:'dd/MM/yyyy')}}</td> -->
                <td style="width: 10%;">{{data.maleCount}}</td>
                <td style="width: 10%;">{{data.femaleCount}}</td>
                <td>{{data.couponUsed}}</td>
                <!-- <td>{{(schoolData == 0 || schoolData == "0") ? '-' : schoolData.name}}</td>             -->
              </tr>
              
            </tbody>
          </table>
        </div>
      </main>  
    </div>
    
  </div>
</div>